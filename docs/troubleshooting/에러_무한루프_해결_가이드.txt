================================================================================
  ë°”ë‚˜ë‚˜ ì¤‘ê³ ì»´í“¨í„° í”„ë¡œì íŠ¸ - ì—ëŸ¬ ë¬´í•œ ë£¨í”„ í•´ê²° ê°€ì´ë“œ
================================================================================

ì‘ì„±ì¼: 2025-11-02
í”„ë¡œì íŠ¸: ë°”ë‚˜ë‚˜ ì¤‘ê³ ì»´í“¨í„° ë„ë§¤ ë§¤ì¹­ í”Œë«í¼
ë¬¸ì œ: ì—ëŸ¬ ìˆ˜ì • í›„ ê¸°ì¡´ ì •ìƒ ì‘ë™ ê¸°ëŠ¥ì´ ë‹¤ì‹œ ì—ëŸ¬ ë°œìƒí•˜ëŠ” ë¬´í•œ íŒ¨í„´


================================================================================
  ëª©ì°¨
================================================================================

1. ë¬¸ì œ ë¶„ì„ - ì™œ ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ëŠ”ê°€?
2. ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ í•´ê²°ì±… (ê¸´ê¸‰)
3. ì¥ê¸°ì  í•´ê²° ë°©ì•ˆ (ê·¼ë³¸ ì›ì¸ ì œê±°)
4. í”„ë¡œì íŠ¸ë³„ í•µì‹¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
5. ì—ëŸ¬ ë°œìƒ ì‹œ í‘œì¤€ ì‘ì—… ì ˆì°¨ (SOP)
6. Git ë¸Œëœì¹˜ ì „ëµ
7. í…ŒìŠ¤íŠ¸ ìë™í™” ë¡œë“œë§µ
8. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì „ëµ
9. ë¬¸ì„œí™” ê·œì¹™
10. ê¸´ê¸‰ ë³µêµ¬ ë§¤ë‰´ì–¼


================================================================================
  1. ë¬¸ì œ ë¶„ì„ - ì™œ ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ëŠ”ê°€?
================================================================================

### ì›ì¸ 1: ê³µìœ  ì˜ì¡´ì„± (Shared Dependencies)
---------------------------------------------------------------------------
ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸/ì„œë¹„ìŠ¤ê°€ ë™ì¼í•œ í•¨ìˆ˜/ëª¨ë“ˆì„ ê³µìœ í•˜ëŠ” ê²½ìš°:

[ì˜ˆì‹œ]
- lib/services/auth.service.ts ìˆ˜ì •
  â†’ useAuth() hookì´ ì˜í–¥ë°›ìŒ
  â†’ Header ì»´í¬ë„ŒíŠ¸ê°€ ê¹¨ì§
  â†’ ëª¨ë“  í˜ì´ì§€ê°€ ì˜í–¥ë°›ìŒ

[í•´ê²°ì±…]
â†’ ìˆ˜ì • ì „ "ì˜í–¥ ë²”ìœ„ ë¶„ì„" í•„ìˆ˜
â†’ ê³µìœ  ëª¨ë“ˆ ìˆ˜ì • ì‹œ ëª¨ë“  ì‚¬ìš©ì²˜ í™•ì¸


### ì›ì¸ 2: localStorage ì„¸ì…˜ ë¶ˆì¼ì¹˜
---------------------------------------------------------------------------
ì´ í”„ë¡œì íŠ¸ëŠ” Fetch API + localStorage ê¸°ë°˜ ì¸ì¦ ì‚¬ìš©:

[ë¬¸ì œ íŒ¨í„´]
1. auth.service.tsì—ì„œ ì„¸ì…˜ í† í° í‚¤ ë³€ê²½
2. ê¸°ì¡´ localStorageì—ëŠ” êµ¬ í‚¤ë¡œ ì €ì¥ë¨
3. getCurrentUser() ì‹¤íŒ¨ â†’ ëª¨ë“  ì¸ì¦ ê¸°ëŠ¥ ê¹¨ì§

[í•´ê²°ì±…]
â†’ localStorage í‚¤ ë³€ê²½ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§ í•„ìˆ˜
â†’ ê°œë°œ ì¤‘ì—ëŠ” localStorage.clear() ìŠµê´€í™”


### ì›ì¸ 3: Supabase RLS ì •ì±… ì¶©ëŒ
---------------------------------------------------------------------------
[ë¬¸ì œ íŒ¨í„´]
1. users í…Œì´ë¸”ì— ìƒˆ ì»¬ëŸ¼ ì¶”ê°€ (ì˜ˆ: profile_image)
2. RLS ì •ì±…ì´ í•´ë‹¹ ì»¬ëŸ¼ ì ‘ê·¼ ì°¨ë‹¨
3. ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ ì‹¤íŒ¨ â†’ ì•± ì „ì²´ ë§ˆë¹„

[í•´ê²°ì±…]
â†’ ì»¬ëŸ¼ ì¶”ê°€ ì‹œ RLS ì •ì±… ë™ì‹œ ì—…ë°ì´íŠ¸
â†’ supabase-setup.sql íŒŒì¼ì— ë³€ê²½ì‚¬í•­ ê¸°ë¡


### ì›ì¸ 4: íƒ€ì… ì •ì˜ ë¶ˆì¼ì¹˜
---------------------------------------------------------------------------
[ë¬¸ì œ íŒ¨í„´]
1. types/user.tsì—ì„œ User ì¸í„°í˜ì´ìŠ¤ ìˆ˜ì •
2. ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ì—ì„œ íƒ€ì… ì—ëŸ¬ ë°œìƒ
3. TypeScript ì—ëŸ¬ ë¬´ì‹œí•˜ê³  ë¹Œë“œ â†’ ëŸ°íƒ€ì„ ì—ëŸ¬ í­íƒ„

[í•´ê²°ì±…]
â†’ íƒ€ì… ë³€ê²½ ì‹œ ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ì ˆëŒ€ ë¬´ì‹œí•˜ì§€ ë§ ê²ƒ
â†’ "Find All References" ê¸°ëŠ¥ìœ¼ë¡œ ëª¨ë“  ì‚¬ìš©ì²˜ í™•ì¸


### ì›ì¸ 5: Fetch API í—¤ë” ëˆ„ë½
---------------------------------------------------------------------------
ì´ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  API í˜¸ì¶œì€ Fetch API ì§ì ‘ ì‚¬ìš©:

[ë¬¸ì œ íŒ¨í„´]
1. ìƒˆ API ë©”ì„œë“œ ì¶”ê°€ (ì˜ˆ: updateProduct)
2. Authorization í—¤ë” ëˆ„ë½
3. 401 Unauthorized â†’ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ â†’ ë¬´í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸

[í•´ê²°ì±…]
â†’ Fetch API í˜¸ì¶œ ì‹œ í—¤ë” ì²´í¬ë¦¬ìŠ¤íŠ¸ í•„ìˆ˜
â†’ ê³µí†µ fetchWithAuth() ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©


### ì›ì¸ 6: ë¹„ë™ê¸° ì²˜ë¦¬ ìˆœì„œ ë¬¸ì œ
---------------------------------------------------------------------------
[ë¬¸ì œ íŒ¨í„´]
1. useEffectì—ì„œ ë‘ ê°œì˜ ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œ
2. ë‘ ë²ˆì§¸ í•¨ìˆ˜ê°€ ì²« ë²ˆì§¸ í•¨ìˆ˜ ê²°ê³¼ì— ì˜ì¡´
3. ì²« ë²ˆì§¸ í•¨ìˆ˜ ì™„ë£Œ ì „ì— ë‘ ë²ˆì§¸ í•¨ìˆ˜ ì‹¤í–‰ â†’ ì—ëŸ¬

[í•´ê²°ì±…]
â†’ async/await ìˆœì°¨ ì‹¤í–‰
â†’ Promise.all() ë³‘ë ¬ ì‹¤í–‰ êµ¬ë¶„


================================================================================
  2. ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ í•´ê²°ì±… (ê¸´ê¸‰)
================================================================================

### í•´ê²°ì±… A: Git Commit ë‹¨ìœ„ ìµœì†Œí™”
---------------------------------------------------------------------------
[í˜„ì¬ ë¬¸ì œ]
- 10ê°œ íŒŒì¼ ë™ì‹œ ìˆ˜ì • â†’ ì»¤ë°‹ â†’ ì—ëŸ¬ ë°œìƒ â†’ ì–´ë””ì„œ ë¬¸ì œì¸ì§€ ëª¨ë¦„

[ê°œì„  ë°©ë²•]
1. í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ìˆ˜ì •
2. ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
3. ì‘ë™ í™•ì¸ í›„ ì»¤ë°‹
4. ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ì´ë™

[ì˜ˆì‹œ]
âŒ ë‚˜ìœ ì˜ˆ:
   git commit -m "ìƒí’ˆ ê¸°ëŠ¥ ì „ì²´ êµ¬í˜„"
   (10ê°œ íŒŒì¼ ìˆ˜ì •, ì–´ë””ì„œ ë¬¸ì œì¸ì§€ ë¶ˆëª…í™•)

âœ… ì¢‹ì€ ì˜ˆ:
   git commit -m "ProductService.createProduct() êµ¬í˜„"
   (1ê°œ íŒŒì¼ë§Œ ìˆ˜ì •, ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ì‹œ ë¡¤ë°± ê°€ëŠ¥)


### í•´ê²°ì±… B: ì²´í¬ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ìˆ˜ì •
---------------------------------------------------------------------------
ëª¨ë“  ì½”ë“œ ìˆ˜ì • ì‹œ ì•„ë˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‹¤í–‰:

[ ] 1. TypeScript ì»´íŒŒì¼ ì—ëŸ¬ ì—†ìŒ (npm run build)
[ ] 2. ESLint ê²½ê³  í™•ì¸ (npm run lint)
[ ] 3. ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì—ëŸ¬ ì—†ìŒ
[ ] 4. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ API ì‘ë‹µ í™•ì¸
[ ] 5. localStorage ì„¸ì…˜ ìœ íš¨ì„± í™•ì¸
[ ] 6. ì˜í–¥ë°›ëŠ” ëª¨ë“  í˜ì´ì§€ ìˆ˜ë™ í…ŒìŠ¤íŠ¸
[ ] 7. Git commit ì „ ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ ì¬í™•ì¸


### í•´ê²°ì±… C: ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ë¡¤ë°±
---------------------------------------------------------------------------
ì—ëŸ¬ í•´ê²°ì— 30ë¶„ ì´ìƒ ì†Œìš” ì‹œ:

1. í˜„ì¬ ë³€ê²½ì‚¬í•­ stash
   git stash save "ì‘ì—… ì¤‘ë‹¨: ìƒí’ˆ ë“±ë¡ ê¸°ëŠ¥"

2. ë§ˆì§€ë§‰ ì •ìƒ ì»¤ë°‹ìœ¼ë¡œ ë³µê·€
   git reset --hard HEAD~1

3. ë‹¤ì‹œ ì‹œì‘ (ë” ì‘ì€ ë‹¨ìœ„ë¡œ)


### í•´ê²°ì±… D: localStorage ì •ê¸°ì  ì´ˆê¸°í™”
---------------------------------------------------------------------------
ì´ í”„ë¡œì íŠ¸ëŠ” localStorage ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬ ì‚¬ìš©:

[ë¬¸ì œ ì˜ˆë°©]
1. ë§¤ì¼ ê°œë°œ ì‹œì‘ ì „ localStorage.clear()
2. auth.service.ts ìˆ˜ì • í›„ ë¬´ì¡°ê±´ localStorage.clear()
3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Application â†’ Local Storage í™•ì¸

[ìë™í™”]
// app/layout.tsx ë˜ëŠ” ê°œë°œìš© ìŠ¤í¬ë¦½íŠ¸
if (process.env.NODE_ENV === 'development') {
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ ìœ íš¨ì„± ê²€ì‚¬
  const storageKey = `sb-vqypnenjejbtvvvewxee-auth-token`;
  const session = localStorage.getItem(storageKey);

  if (session) {
    try {
      JSON.parse(session);
    } catch {
      console.warn('Invalid session, clearing localStorage');
      localStorage.clear();
      window.location.reload();
    }
  }
}


### í•´ê²°ì±… E: ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©
---------------------------------------------------------------------------
Fetch API í˜¸ì¶œì„ ë§¤ë²ˆ ì§ì ‘ ì‘ì„±í•˜ë©´ ì‹¤ìˆ˜ ë°œìƒ:

[ë¬¸ì œ]
- Authorization í—¤ë” ëˆ„ë½
- apikey í—¤ë” ëˆ„ë½
- Content-Type ëˆ„ë½
- ì—ëŸ¬ ì²˜ë¦¬ ëˆ„ë½

[í•´ê²°ì±…] lib/utils/fetch.ts ìƒì„±:

```typescript
// lib/utils/fetch.ts
export async function fetchWithAuth(
  url: string,
  options: RequestInit = {}
): Promise<Response> {
  // localStorageì—ì„œ í† í° ìë™ íšë“
  const storageKey = `sb-vqypnenjejbtvvvewxee-auth-token`;
  const sessionData = localStorage.getItem(storageKey);
  const accessToken = sessionData ? JSON.parse(sessionData).access_token : null;

  // ê³µí†µ í—¤ë” ìë™ ì¶”ê°€
  const headers: HeadersInit = {
    'apikey': process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    'Content-Type': 'application/json',
    ...options.headers,
  };

  if (accessToken) {
    headers['Authorization'] = `Bearer ${accessToken}`;
  }

  const response = await fetch(url, {
    ...options,
    headers,
  });

  // 401 ì—ëŸ¬ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ
  if (response.status === 401) {
    localStorage.clear();
    window.location.href = '/login';
    throw new Error('Unauthorized');
  }

  return response;
}
```

[ì‚¬ìš© ì˜ˆì‹œ]
// Before (ì‹¤ìˆ˜ ë°œìƒ ê°€ëŠ¥)
const response = await fetch(`${supabaseUrl}/rest/v1/products`, {
  headers: {
    'Authorization': `Bearer ${accessToken}`, // ëˆ„ë½ ê°€ëŠ¥
    'apikey': supabaseKey,                     // ëˆ„ë½ ê°€ëŠ¥
    'Content-Type': 'application/json',        // ëˆ„ë½ ê°€ëŠ¥
  },
});

// After (ì•ˆì „)
const response = await fetchWithAuth(`${supabaseUrl}/rest/v1/products`);


================================================================================
  3. ì¥ê¸°ì  í•´ê²° ë°©ì•ˆ (ê·¼ë³¸ ì›ì¸ ì œê±°)
================================================================================

### ë°©ì•ˆ 1: í…ŒìŠ¤íŠ¸ ìë™í™” ë„ì…
---------------------------------------------------------------------------
[í˜„ì¬ ë¬¸ì œ]
- ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì§„í–‰
- íšŒê·€ ë²„ê·¸ ë°œê²¬ ë¶ˆê°€ëŠ¥

[í•´ê²°ì±…]
1. Jest + React Testing Library ì„¤ì¹˜
2. í•µì‹¬ ì„œë¹„ìŠ¤ë¶€í„° ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
3. CI/CDì—ì„œ ìë™ ì‹¤í–‰

[ìš°ì„ ìˆœìœ„]
Phase 1: AuthService í…ŒìŠ¤íŠ¸ (íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ)
Phase 2: ProductService í…ŒìŠ¤íŠ¸
Phase 3: SellRequestService í…ŒìŠ¤íŠ¸
Phase 4: ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

[ì˜ˆì‹œ í…ŒìŠ¤íŠ¸]
// lib/services/__tests__/auth.service.test.ts
describe('AuthService', () => {
  test('signIn should return user on success', async () => {
    const user = await AuthService.signIn('test@example.com', 'password');
    expect(user).toBeDefined();
    expect(user.email).toBe('test@example.com');
  });

  test('signIn should throw on invalid credentials', async () => {
    await expect(
      AuthService.signIn('wrong@example.com', 'wrong')
    ).rejects.toThrow();
  });
});


### ë°©ì•ˆ 2: íƒ€ì… ê°€ë“œ í•¨ìˆ˜ ì¶”ê°€
---------------------------------------------------------------------------
ëŸ°íƒ€ì„ì—ì„œ íƒ€ì… ê²€ì¦ìœ¼ë¡œ ì—ëŸ¬ ì¡°ê¸° ë°œê²¬:

```typescript
// lib/utils/type-guards.ts
export function isValidUser(data: any): data is User {
  return (
    data &&
    typeof data.uid === 'string' &&
    typeof data.email === 'string' &&
    typeof data.name === 'string' &&
    ['normal', 'wholesaler', 'admin'].includes(data.userType)
  );
}

// ì‚¬ìš© ì˜ˆì‹œ
const response = await fetchWithAuth(`${supabaseUrl}/rest/v1/users?uid=eq.${uid}`);
const data = await response.json();

if (!data[0] || !isValidUser(data[0])) {
  throw new Error('Invalid user data received from API');
}

const user: User = data[0];
```


### ë°©ì•ˆ 3: ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì„¤ì •
---------------------------------------------------------------------------
React ì—ëŸ¬ ë°”ìš´ë”ë¦¬ë¡œ ì•± ì „ì²´ í¬ë˜ì‹œ ë°©ì§€:

```typescript
// components/error-boundary.tsx
'use client';

import React from 'react';

export class ErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean; error?: Error }
> {
  constructor(props: any) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('ErrorBoundary caught error:', error, errorInfo);

    // ì—¬ê¸°ì— Sentry ê°™ì€ ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì—°ë™
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="p-8 text-center">
          <h2 className="text-2xl font-bold mb-4">ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
          <p className="mb-4">{this.state.error?.message}</p>
          <button
            onClick={() => this.setState({ hasError: false })}
            className="bg-blue-500 text-white px-4 py-2 rounded"
          >
            ë‹¤ì‹œ ì‹œë„
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}

// app/layout.tsxì—ì„œ ì‚¬ìš©
<ErrorBoundary>
  {children}
</ErrorBoundary>
```


### ë°©ì•ˆ 4: Supabase RPC í•¨ìˆ˜ ì‚¬ìš©
---------------------------------------------------------------------------
[í˜„ì¬ ë¬¸ì œ]
- íŠ¸ëœì­ì…˜ ë¯¸ì§€ì›
- selectWholesaler() ê°™ì€ ë³µì¡í•œ ë¡œì§ì—ì„œ ë¶ˆì¼ì¹˜ ë°œìƒ ê°€ëŠ¥

[í•´ê²°ì±…]
Supabase Database Functions (PostgreSQL Functions) ì‚¬ìš©:

```sql
-- Supabase Dashboard â†’ SQL Editor
CREATE OR REPLACE FUNCTION select_wholesaler(
  p_sell_request_id UUID,
  p_wholesaler_id UUID,
  p_offer_id UUID
)
RETURNS void
LANGUAGE plpgsql
SECURITY DEFINER
AS $$
BEGIN
  -- íŠ¸ëœì­ì…˜ ì‹œì‘ (ìë™)

  -- 1. sell_requests ì—…ë°ì´íŠ¸
  UPDATE sell_requests
  SET
    status = 'closed',
    selected_wholesaler_id = p_wholesaler_id,
    closed_at = NOW()
  WHERE id = p_sell_request_id;

  -- 2. purchase_offers ì—…ë°ì´íŠ¸
  UPDATE purchase_offers
  SET is_selected = TRUE
  WHERE id = p_offer_id;

  -- íŠ¸ëœì­ì…˜ ì»¤ë°‹ (ìë™)
  -- ì—ëŸ¬ ë°œìƒ ì‹œ ìë™ ë¡¤ë°±
END;
$$;
```

```typescript
// lib/services/sell-request.service.ts
static async selectWholesaler(
  sellRequestId: string,
  wholesalerId: string,
  offerId: string,
  accessToken: string
): Promise<void> {
  // RPC í˜¸ì¶œ (íŠ¸ëœì­ì…˜ ë³´ì¥)
  const response = await fetchWithAuth(
    `${supabaseUrl}/rest/v1/rpc/select_wholesaler`,
    {
      method: 'POST',
      body: JSON.stringify({
        p_sell_request_id: sellRequestId,
        p_wholesaler_id: wholesalerId,
        p_offer_id: offerId,
      }),
    }
  );

  if (!response.ok) {
    throw new Error('Failed to select wholesaler');
  }
}
```


================================================================================
  4. í”„ë¡œì íŠ¸ë³„ í•µì‹¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
================================================================================

### ì¸ì¦ ê´€ë ¨ ìˆ˜ì • ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
---------------------------------------------------------------------------
[ ] 1. lib/services/auth.service.ts ìˆ˜ì •
[ ] 2. lib/hooks/use-auth.ts ì˜í–¥ í™•ì¸
[ ] 3. lib/store/auth.store.ts íƒ€ì… ì¼ì¹˜ í™•ì¸
[ ] 4. app/(auth)/login/page.tsx í…ŒìŠ¤íŠ¸
[ ] 5. app/(auth)/signup/page.tsx í…ŒìŠ¤íŠ¸
[ ] 6. components/layout/header.tsx ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í…ŒìŠ¤íŠ¸
[ ] 7. localStorage í‚¤ ë³€ê²½ ì—¬ë¶€ í™•ì¸
[ ] 8. /auth/callback ì´ë©”ì¼ í™•ì¸ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
[ ] 9. ëª¨ë“  ë³´í˜¸ëœ í˜ì´ì§€ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
[ ] 10. ë¸Œë¼ìš°ì € ì‹œí¬ë¦¿ ëª¨ë“œì—ì„œ ì¬í…ŒìŠ¤íŠ¸


### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìˆ˜ì • ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
---------------------------------------------------------------------------
[ ] 1. Supabase SQL Editorì—ì„œ ALTER TABLE ì‹¤í–‰
[ ] 2. supabase-setup.sql íŒŒì¼ ì—…ë°ì´íŠ¸
[ ] 3. types/[í…Œì´ë¸”ëª…].ts ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
[ ] 4. lib/services/[ì„œë¹„ìŠ¤].service.ts ìˆ˜ì •
[ ] 5. RLS ì •ì±… ì—…ë°ì´íŠ¸ (ìƒˆ ì»¬ëŸ¼ ì ‘ê·¼ ê¶Œí•œ)
[ ] 6. íŠ¸ë¦¬ê±° í•¨ìˆ˜ ì˜í–¥ í™•ì¸
[ ] 7. ì¸ë±ìŠ¤ ì¶”ê°€ ì—¬ë¶€ ê²€í† 
[ ] 8. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ TypeScript ì»´íŒŒì¼ í™•ì¸
[ ] 9. ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” ì—¬ë¶€ í™•ì¸
[ ] 10. API ì‘ë‹µ íƒ€ì… ê²€ì¦ (isValidUser ë“±)


### ì„œë¹„ìŠ¤ ë ˆì´ì–´ ìˆ˜ì • ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
---------------------------------------------------------------------------
[ ] 1. Fetch API í—¤ë” ì™„ì „ì„± í™•ì¸
      - apikey
      - Authorization
      - Content-Type
      - Prefer (í•„ìš” ì‹œ)
[ ] 2. ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ ì¡´ì¬ í™•ì¸
[ ] 3. 401 Unauthorized ì²˜ë¦¬ í™•ì¸
[ ] 4. íƒ€ì… ë³€í™˜ ì •í™•ì„± (snake_case â†’ camelCase)
[ ] 5. ë‚ ì§œ í•„ë“œ Date ê°ì²´ ë³€í™˜ í™•ì¸
[ ] 6. í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
[ ] 7. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ì‹¤ì œ API ìš”ì²­ í™•ì¸
[ ] 8. RLS ì •ì±… ì¶©ëŒ ì—¬ë¶€ í™•ì¸


### ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
---------------------------------------------------------------------------
[ ] 1. useAuth() hook ì‚¬ìš© ì—¬ë¶€ í™•ì¸
[ ] 2. user ê°ì²´ null ì²´í¬ ì¡´ì¬ í™•ì¸
[ ] 3. isLoading ìƒíƒœ ì²˜ë¦¬ í™•ì¸
[ ] 4. useEffect ì˜ì¡´ì„± ë°°ì—´ í™•ì¸
[ ] 5. ë¹„ë™ê¸° í•¨ìˆ˜ ìˆœì„œ í™•ì¸ (async/await)
[ ] 6. ë¸Œë¼ìš°ì € ì½˜ì†” ì—ëŸ¬/ê²½ê³  í™•ì¸
[ ] 7. React DevToolsì—ì„œ props/state í™•ì¸
[ ] 8. ìƒìœ„/í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ì˜í–¥ í™•ì¸


================================================================================
  5. ì—ëŸ¬ ë°œìƒ ì‹œ í‘œì¤€ ì‘ì—… ì ˆì°¨ (SOP)
================================================================================

### Step 1: ì—ëŸ¬ ì •ë³´ ìˆ˜ì§‘ (5ë¶„)
---------------------------------------------------------------------------
1. ë¸Œë¼ìš°ì € ì½˜ì†” ì—ëŸ¬ ë©”ì‹œì§€ ë³µì‚¬
2. ë„¤íŠ¸ì›Œí¬ íƒ­ í™•ì¸ (ì‹¤íŒ¨í•œ API ìš”ì²­)
3. React DevToolsì—ì„œ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸
4. localStorage ì„¸ì…˜ ë°ì´í„° í™•ì¸
5. ì—ëŸ¬ ë°œìƒ ì§ì „ ë³€ê²½í•œ íŒŒì¼ ëª©ë¡ í™•ì¸ (git status)


### Step 2: ì—ëŸ¬ ì›ì¸ ë¶„ë¥˜ (3ë¶„)
---------------------------------------------------------------------------
[A] ì»´íŒŒì¼ ì—ëŸ¬ (TypeScript)
    â†’ types/ í´ë”ì˜ ì¸í„°í˜ì´ìŠ¤ ë¶ˆì¼ì¹˜
    â†’ ì¦‰ì‹œ ìˆ˜ì • ê°€ëŠ¥

[B] ëŸ°íƒ€ì„ ì—ëŸ¬ (JavaScript)
    â†’ null/undefined ì ‘ê·¼
    â†’ íƒ€ì… ê°€ë“œ ì¶”ê°€ í•„ìš”

[C] API ì—ëŸ¬ (Fetch)
    â†’ 401: localStorage í† í° í™•ì¸
    â†’ 403: RLS ì •ì±… í™•ì¸
    â†’ 500: Supabase í•¨ìˆ˜/íŠ¸ë¦¬ê±° í™•ì¸

[D] UI ë Œë”ë§ ì—ëŸ¬ (React)
    â†’ useEffect ë¬´í•œ ë£¨í”„
    â†’ ì˜ì¡´ì„± ë°°ì—´ ìˆ˜ì •


### Step 3: ê²©ë¦¬ ë° ì¬í˜„ (10ë¶„)
---------------------------------------------------------------------------
1. ì—ëŸ¬ ë°œìƒ ìµœì†Œ ì¬í˜„ ì½”ë“œ ì‘ì„±
2. ê´€ë ¨ ì—†ëŠ” ì½”ë“œ ì£¼ì„ ì²˜ë¦¬
3. console.logë¡œ ë°ì´í„° íë¦„ ì¶”ì 
4. ì—ëŸ¬ ë°œìƒ ì—¬ë¶€ í™•ì¸


### Step 4: ìˆ˜ì • (20ë¶„)
---------------------------------------------------------------------------
1. ìˆ˜ì • ì „ í˜„ì¬ ìƒíƒœ ì»¤ë°‹ (git commit)
2. ìµœì†Œí•œì˜ ë³€ê²½ë§Œ ì ìš©
3. ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
4. ì‘ë™ ì‹œ ì»¤ë°‹, ì‹¤íŒ¨ ì‹œ ë¡¤ë°±


### Step 5: ì˜í–¥ ë²”ìœ„ í™•ì¸ (10ë¶„)
---------------------------------------------------------------------------
1. ìˆ˜ì •í•œ íŒŒì¼ì„ importí•˜ëŠ” ëª¨ë“  íŒŒì¼ í™•ì¸
   - VS Code: "Find All References"
   - ë˜ëŠ”: grep -r "import.*auth.service" app/ components/

2. í•´ë‹¹ íŒŒì¼ë“¤ì„ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ ìˆ˜ë™ í…ŒìŠ¤íŠ¸

3. íšŒê·€ ë²„ê·¸ ë°œê²¬ ì‹œ:
   â†’ ì¶”ê°€ ìˆ˜ì •
   â†’ ë˜ëŠ” ë¡¤ë°± í›„ ë‹¤ë¥¸ ë°©ë²• ì‹œë„


### Step 6: ë¬¸ì„œí™” (5ë¶„)
---------------------------------------------------------------------------
1. ì—ëŸ¬ ì›ì¸ ë° í•´ê²° ë°©ë²• ê¸°ë¡
   - íŒŒì¼: ì—ëŸ¬_í•´ê²°_ë¡œê·¸.txt

2. í–¥í›„ ë™ì¼ ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ì°¸ê³  ê°€ëŠ¥


### ì´ ì†Œìš” ì‹œê°„: ìµœëŒ€ 53ë¶„
---------------------------------------------------------------------------
53ë¶„ ì´ˆê³¼ ì‹œ:
â†’ í˜„ì¬ ë³€ê²½ì‚¬í•­ stash
â†’ ë§ˆì§€ë§‰ ì •ìƒ ì»¤ë°‹ìœ¼ë¡œ ë¡¤ë°±
â†’ ë‹¤ìŒ ë‚  ë‹¤ì‹œ ì‹œì‘ (ë¨¸ë¦¬ë¥¼ ì‹íˆê³ )


================================================================================
  6. Git ë¸Œëœì¹˜ ì „ëµ
================================================================================

### ë¸Œëœì¹˜ êµ¬ì¡°
---------------------------------------------------------------------------
main              (í”„ë¡œë•ì…˜ ë°°í¬ìš©, í•­ìƒ ì•ˆì •)
â”œâ”€â”€ develop       (ê°œë°œ í†µí•© ë¸Œëœì¹˜)
    â”œâ”€â”€ feature/auth-fix           (ì¸ì¦ ìˆ˜ì •)
    â”œâ”€â”€ feature/product-create     (ìƒí’ˆ ë“±ë¡)
    â””â”€â”€ feature/sell-request-ui    (ë§¤ì… ìš”ì²­ UI)


### ì‘ì—… íë¦„
---------------------------------------------------------------------------
1. ìƒˆ ê¸°ëŠ¥ ì‹œì‘
   git checkout develop
   git pull origin develop
   git checkout -b feature/product-create

2. ì‘ì€ ë‹¨ìœ„ë¡œ ì»¤ë°‹
   git add lib/services/product.service.ts
   git commit -m "Add createProduct method"

   git add app/(main)/products/new/page.tsx
   git commit -m "Add product creation UI"

3. ê¸°ëŠ¥ ì™„ë£Œ í›„ developì— ë¨¸ì§€
   git checkout develop
   git merge feature/product-create
   git push origin develop

4. ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸ í›„ mainì— ë¨¸ì§€
   git checkout main
   git merge develop
   git push origin main


### ì—ëŸ¬ ë°œìƒ ì‹œ ë¡¤ë°±
---------------------------------------------------------------------------
[ì‹œë‚˜ë¦¬ì˜¤ 1] ë§ˆì§€ë§‰ ì»¤ë°‹ì´ ë¬¸ì œ
git reset --hard HEAD~1

[ì‹œë‚˜ë¦¬ì˜¤ 2] 3ê°œ ì»¤ë°‹ ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸°
git reset --hard HEAD~3

[ì‹œë‚˜ë¦¬ì˜¤ 3] íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë³µêµ¬
git log --oneline  # ì»¤ë°‹ í•´ì‹œ í™•ì¸
git reset --hard abc1234

[ì‹œë‚˜ë¦¬ì˜¤ 4] ì»¤ë°‹ì€ ìœ ì§€í•˜ê³  ë³€ê²½ë§Œ ì·¨ì†Œ
git revert HEAD


================================================================================
  7. í…ŒìŠ¤íŠ¸ ìë™í™” ë¡œë“œë§µ
================================================================================

### Phase 1: Jest ì„¤ì • (1ì¼)
---------------------------------------------------------------------------
1. ì„¤ì¹˜
   npm install --save-dev jest @testing-library/react @testing-library/jest-dom

2. jest.config.js ìƒì„±

3. package.json ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
   "test": "jest",
   "test:watch": "jest --watch",
   "test:coverage": "jest --coverage"


### Phase 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´ í…ŒìŠ¤íŠ¸ (1ì£¼)
---------------------------------------------------------------------------
[ìš°ì„ ìˆœìœ„ 1] AuthService
- signUp()
- signIn()
- signOut()
- getCurrentUser()

[ìš°ì„ ìˆœìœ„ 2] ProductService
- createProduct()
- getProduct()
- getAllProducts()

[ìš°ì„ ìˆœìœ„ 3] SellRequestService
- createSellRequest()
- createOffer()
- selectWholesaler()


### Phase 3: ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ (1ì£¼)
---------------------------------------------------------------------------
[ìš°ì„ ìˆœìœ„ 1] ì¸ì¦ ì»´í¬ë„ŒíŠ¸
- LoginPage
- SignupPage
- Header (ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ)

[ìš°ì„ ìˆœìœ„ 2] ìƒí’ˆ ì»´í¬ë„ŒíŠ¸
- ProductList
- ProductDetail
- ProductForm


### Phase 4: E2E í…ŒìŠ¤íŠ¸ (ì„ íƒ)
---------------------------------------------------------------------------
Playwright ë˜ëŠ” Cypress ì‚¬ìš©:

[í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤]
1. íšŒì›ê°€ì… â†’ ì´ë©”ì¼ í™•ì¸ â†’ ë¡œê·¸ì¸
2. ë„ë§¤ìƒ ë“±ë¡ â†’ ì‚¬ì—…ì ì¸ì¦ â†’ ìƒí’ˆ ë“±ë¡
3. ì¼ë°˜ ì‚¬ìš©ì â†’ ë§¤ì… ìš”ì²­ ë“±ë¡ â†’ ë„ë§¤ìƒ ì œì•ˆ â†’ ê±°ë˜ í™•ì •


================================================================================
  8. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì „ëµ
================================================================================

### ê°œë°œ í™˜ê²½ ë¡œê¹…
---------------------------------------------------------------------------
ê³µí†µ ë¡œê±° ìœ í‹¸ë¦¬í‹° ìƒì„±:

```typescript
// lib/utils/logger.ts
export const logger = {
  info: (message: string, data?: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.log(`[INFO] ${message}`, data || '');
    }
  },

  error: (message: string, error?: any) => {
    console.error(`[ERROR] ${message}`, error || '');

    // í”„ë¡œë•ì…˜ì—ì„œëŠ” Sentryë¡œ ì „ì†¡
    if (process.env.NODE_ENV === 'production') {
      // Sentry.captureException(error);
    }
  },

  api: (method: string, url: string, status: number, data?: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.log(`[API] ${method} ${url} - ${status}`, data || '');
    }
  },
};

// ì‚¬ìš© ì˜ˆì‹œ
logger.info('User logged in', { userId: user.uid });
logger.error('Failed to create product', error);
logger.api('POST', '/rest/v1/products', 201, { id: 'abc123' });
```


### API í˜¸ì¶œ ì¶”ì 
---------------------------------------------------------------------------
fetchWithAuth() í•¨ìˆ˜ì— ë¡œê¹… ì¶”ê°€:

```typescript
export async function fetchWithAuth(
  url: string,
  options: RequestInit = {}
): Promise<Response> {
  const startTime = performance.now();

  try {
    const response = await fetch(url, { ...options, headers });
    const endTime = performance.now();

    logger.api(
      options.method || 'GET',
      url,
      response.status,
      { duration: `${(endTime - startTime).toFixed(2)}ms` }
    );

    return response;
  } catch (error) {
    logger.error('Fetch failed', { url, error });
    throw error;
  }
}
```


### localStorage ë³€ê²½ ì¶”ì 
---------------------------------------------------------------------------
```typescript
// lib/utils/storage-monitor.ts
if (process.env.NODE_ENV === 'development') {
  const originalSetItem = localStorage.setItem;

  localStorage.setItem = function(key: string, value: string) {
    console.log(`[localStorage] SET ${key}`, value.substring(0, 100));
    originalSetItem.call(this, key, value);
  };

  const originalRemoveItem = localStorage.removeItem;

  localStorage.removeItem = function(key: string) {
    console.log(`[localStorage] REMOVE ${key}`);
    originalRemoveItem.call(this, key);
  };
}
```


================================================================================
  9. ë¬¸ì„œí™” ê·œì¹™
================================================================================

### ì—ëŸ¬ í•´ê²° ë¡œê·¸
---------------------------------------------------------------------------
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— "ì—ëŸ¬_í•´ê²°_ë¡œê·¸.txt" ìƒì„±:

[í˜•ì‹]
ë‚ ì§œ: 2025-11-02
ì—ëŸ¬: TypeError: Cannot read property 'uid' of null
ë°œìƒ ìœ„ì¹˜: app/(main)/products/page.tsx:15
ì›ì¸: useAuth() hookì´ userë¥¼ ì•„ì§ ë¡œë“œí•˜ì§€ ì•ŠìŒ
í•´ê²°: isLoading ì²´í¬ ì¶”ê°€ ë° Early Return
ì¬ë°œ ë°©ì§€: ëª¨ë“  user ì ‘ê·¼ ì „ null ì²´í¬ í•„ìˆ˜


### API ë³€ê²½ ë¡œê·¸
---------------------------------------------------------------------------
"API_ë³€ê²½_íˆìŠ¤í† ë¦¬.txt" ìƒì„±:

[í˜•ì‹]
ë‚ ì§œ: 2025-11-02
ë³€ê²½: ProductService.createProduct() í—¤ë” ì¶”ê°€
Before: Authorization í—¤ë”ë§Œ ì¡´ì¬
After: Authorization + Prefer: return=minimal ì¶”ê°€
ì´ìœ : ì‘ë‹µ í¬ê¸° ìµœì†Œí™”
ì˜í–¥: ì—†ìŒ (ì´ì „ ë²„ì „ê³¼ í˜¸í™˜)


### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œê·¸
---------------------------------------------------------------------------
"DB_ë§ˆì´ê·¸ë ˆì´ì…˜_íˆìŠ¤í† ë¦¬.txt" ìƒì„±:

[í˜•ì‹]
ë‚ ì§œ: 2025-11-02
ë³€ê²½: users í…Œì´ë¸”ì— profile_image ì»¬ëŸ¼ ì¶”ê°€
SQL: ALTER TABLE users ADD COLUMN profile_image TEXT;
íƒ€ì…: types/user.tsì— profileImage?: string ì¶”ê°€
RLS: ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥, ë³¸ì¸ë§Œ ìˆ˜ì • ê°€ëŠ¥
ì˜í–¥: ê¸°ì¡´ ì½”ë“œì™€ í˜¸í™˜ (ì„ íƒì  í•„ë“œ)


================================================================================
  10. ê¸´ê¸‰ ë³µêµ¬ ë§¤ë‰´ì–¼
================================================================================

### ìƒí™© 1: ì•±ì´ ì™„ì „íˆ ì‘ë™ ë¶ˆê°€
---------------------------------------------------------------------------
[ì¦ìƒ]
- ëª¨ë“  í˜ì´ì§€ê°€ ë¹ˆ í™”ë©´
- ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì—ëŸ¬ í­ë°œ
- ì–´ë””ì„œë¶€í„° ê³ ì³ì•¼ í• ì§€ ëª¨ë¦„

[ë³µêµ¬ ì ˆì°¨]
1. ì¦‰ì‹œ ë§ˆì§€ë§‰ ì •ìƒ ì»¤ë°‹ìœ¼ë¡œ ë¡¤ë°±
   git log --oneline  # ì •ìƒ ì»¤ë°‹ í™•ì¸
   git reset --hard [ì •ìƒ_ì»¤ë°‹_í•´ì‹œ]

2. localStorage ì™„ì „ ì´ˆê¸°í™”
   localStorage.clear()
   window.location.reload()

3. ì•± ì •ìƒ ì‘ë™ í™•ì¸

4. ë³€ê²½ì‚¬í•­ì„ ë” ì‘ì€ ë‹¨ìœ„ë¡œ ë‹¤ì‹œ ì ìš©


### ìƒí™© 2: ì¸ì¦ì´ ì™„ì „íˆ ê¹¨ì§
---------------------------------------------------------------------------
[ì¦ìƒ]
- ë¡œê·¸ì¸ ë¶ˆê°€
- íšŒì›ê°€ì… ë¶ˆê°€
- getCurrentUser() ì‹¤íŒ¨

[ë³µêµ¬ ì ˆì°¨]
1. Supabase Dashboard â†’ Authentication â†’ Users
   - í…ŒìŠ¤íŠ¸ ê³„ì • ìˆ˜ë™ ì‚­ì œ

2. Supabase Dashboard â†’ SQL Editor
   - DELETE FROM public.users;

3. localStorage ì´ˆê¸°í™”
   localStorage.clear()

4. lib/services/auth.service.ts í™•ì¸
   - Fetch API í—¤ë” í™•ì¸
   - ì‘ë‹µ íŒŒì‹± ë¡œì§ í™•ì¸

5. íšŒì›ê°€ì…ë¶€í„° ë‹¤ì‹œ í…ŒìŠ¤íŠ¸


### ìƒí™© 3: RLS ì •ì±… ë¬¸ì œë¡œ DB ì ‘ê·¼ ë¶ˆê°€
---------------------------------------------------------------------------
[ì¦ìƒ]
- API í˜¸ì¶œ ì‹œ 403 Forbidden
- Supabaseì—ì„œ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨

[ë³µêµ¬ ì ˆì°¨]
1. Supabase Dashboard â†’ SQL Editor

2. ëª¨ë“  RLS ì¼ì‹œ ë¹„í™œì„±í™” (ê¸´ê¸‰)
   ALTER TABLE users DISABLE ROW LEVEL SECURITY;
   ALTER TABLE products DISABLE ROW LEVEL SECURITY;
   ALTER TABLE sell_requests DISABLE ROW LEVEL SECURITY;
   ALTER TABLE purchase_offers DISABLE ROW LEVEL SECURITY;
   ALTER TABLE inquiries DISABLE ROW LEVEL SECURITY;

3. ì•± ì •ìƒ ì‘ë™ í™•ì¸

4. í•˜ë‚˜ì”© RLS ì¬í™œì„±í™”í•˜ë©° ë¬¸ì œ ì •ì±… ì‹ë³„
   ALTER TABLE users ENABLE ROW LEVEL SECURITY;
   (ì•± í…ŒìŠ¤íŠ¸)

   ALTER TABLE products ENABLE ROW LEVEL SECURITY;
   (ì•± í…ŒìŠ¤íŠ¸)

   ...


### ìƒí™© 4: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½ í›„ íƒ€ì… ë¶ˆì¼ì¹˜
---------------------------------------------------------------------------
[ì¦ìƒ]
- TypeScript ì»´íŒŒì¼ ì—ëŸ¬ ìˆ˜ì‹­ ê°œ
- ëª¨ë“  íŒŒì¼ì—ì„œ íƒ€ì… ì—ëŸ¬

[ë³µêµ¬ ì ˆì°¨]
1. Supabaseì—ì„œ ìŠ¤í‚¤ë§ˆ ë¡¤ë°±
   ALTER TABLE [í…Œì´ë¸”ëª…] DROP COLUMN [ì»¬ëŸ¼ëª…];

2. types/ í´ë” ë³€ê²½ì‚¬í•­ ë¡¤ë°±
   git checkout HEAD -- types/

3. ì•± ì •ìƒ ì‘ë™ í™•ì¸

4. ìŠ¤í‚¤ë§ˆ ë³€ê²½ì„ ë‹¨ê³„ì ìœ¼ë¡œ ë‹¤ì‹œ ì ìš©
   - ë¨¼ì € types/ ì—…ë°ì´íŠ¸
   - TypeScript ì»´íŒŒì¼ í™•ì¸
   - ê·¸ ë‹¤ìŒ DB ìŠ¤í‚¤ë§ˆ ë³€ê²½


### ìƒí™© 5: Git ì¶©ëŒë¡œ ì½”ë“œê°€ ë§ê°€ì§
---------------------------------------------------------------------------
[ë³µêµ¬ ì ˆì°¨]
1. í˜„ì¬ ë¸Œëœì¹˜ ë²„ë¦¬ê¸°
   git reset --hard origin/main

2. ë˜ëŠ” íŠ¹ì • íŒŒì¼ë§Œ ë³µêµ¬
   git checkout HEAD -- [íŒŒì¼ê²½ë¡œ]

3. ë³€ê²½ì‚¬í•­ ë‹¤ì‹œ ì ìš© (ë” ì‘ì€ ë‹¨ìœ„ë¡œ)


================================================================================
  í•µì‹¬ ì›ì¹™ ìš”ì•½
================================================================================

1. âœ… ì‘ì€ ë‹¨ìœ„ë¡œ ìˆ˜ì • â†’ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ â†’ ì¦‰ì‹œ ì»¤ë°‹
2. âœ… 30ë¶„ ì´ìƒ ë§‰íˆë©´ ë¡¤ë°±
3. âœ… localStorage ì •ê¸°ì  ì´ˆê¸°í™”
4. âœ… Fetch API í—¤ë” ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¤€ìˆ˜
5. âœ… íƒ€ì… ë³€ê²½ ì‹œ ëª¨ë“  ì‚¬ìš©ì²˜ í™•ì¸
6. âœ… RLS ì •ì±… ë³€ê²½ ì‹œ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
7. âœ… ì—ëŸ¬ ë°œìƒ ì‹œ SOP ì¤€ìˆ˜
8. âœ… ëª¨ë“  ë³€ê²½ì‚¬í•­ ë¬¸ì„œí™”
9. âœ… ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš© (fetchWithAuth, logger ë“±)
10. âœ… ì •ê¸°ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ìë™í™” ì¶”ê°€


================================================================================
  ê¸´ê¸‰ ì—°ë½ì²˜
================================================================================

Supabase Dashboard: https://supabase.com/dashboard/project/vqypnenjejbtvvvewxee
Supabase Docs: https://supabase.com/docs
Next.js Docs: https://nextjs.org/docs

í”„ë¡œì íŠ¸ ë¬¸ì„œ:
- SETUP_GUIDE.md
- SUPABASE_SDK_CONVERSION_GUIDE.txt
- ì—ëŸ¬_í•´ê²°_ë¡œê·¸.txt (ì´ íŒŒì¼ì„ ì‘ì„±í•˜ì„¸ìš”!)


================================================================================
  ë§ˆì§€ë§‰ ì¡°ì–¸
================================================================================

ì´ í”„ë¡œì íŠ¸ëŠ” Supabase SDK ëŒ€ì‹  Fetch APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë…íŠ¹í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.

ëª¨ë“  ì—ëŸ¬ì˜ 90%ëŠ” ë‹¤ìŒ 3ê°€ì§€ ì›ì¸ì…ë‹ˆë‹¤:
1. localStorage ì„¸ì…˜ ë¬¸ì œ
2. Fetch API í—¤ë” ëˆ„ë½
3. RLS ì •ì±… ì¶©ëŒ

ì—ëŸ¬ ë°œìƒ ì‹œ ìœ„ 3ê°€ì§€ë¶€í„° í™•ì¸í•˜ì„¸ìš”.

ê·¸ë¦¬ê³  ê¸°ì–µí•˜ì„¸ìš”:
"ì½”ë“œë¥¼ ë¹¨ë¦¬ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤, ì‘ë™í•˜ëŠ” ì½”ë“œë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•©ë‹ˆë‹¤."

íŒŒì´íŒ…! ğŸš€
================================================================================